(function(){var u,r,n,t,i,f,e;t=10;r=!0;n=null;i=null;e=(page-1)*t;u=function(u,o,s,h){return u==null&&(u=page),o==null&&(o=e),s==null&&(s=t),h==null&&(h=category),api.call("news",{data:{draw:u,start:o,length:s,init:r,categoryid:h},success:function(e){var s,c,o,a,l;for(r=!1,e.data=e.data?e.data:[],i===null&&(i=new Pagination(e.recerdsTotal,t)),l=e.data,o=0,a=l.length;o<a;o++)s=l[o],s.category=n[s.categoryid]||"未分类";return View.render("news-list",{data:e.data}),c=i.generate(u),c.category=h,View.render("pagination",c),$(".box").removeClass("loading"),f()}})};api.call("newsCategory",{success:function(t){var r,i,e,f;for(t.data=t.data?t.data:[],n={},f=t.data,i=0,e=f.length;i<e;i++)r=f[i],n[r.id]=r.title;return View.render("news-type",{data:t.data}),u(page)}},!1);f=function(){var n,t;return n=$("#news-list").find("li:first-child").find(".date").text(),t=parseInt(n),$("#years").find(".year").each(function(){var n;return n=$.trim($(this).text()),String(t)===n?($(this).addClass("current"),$(this).next(".vline").addClass("vcurrent")):void 0})};View.activeNavIndex=5}).call(this),function(n,t){"use strict";typeof module!="undefined"&&module.exports?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Pagination=t.call(n)}(this,function(){"use strict";function n(n,t,i){this.config={offset:2,omission:"...",pre:"&laquo;",next:"&raquo;"};this.totalRow=isNaN(n)?0:parseInt(n);this.pageSize=isNaN(t)?10:parseInt(t);this.totalPage=Math.ceil(this.totalRow/this.pageSize);this.totalPage<1&&(this.totalPage=1);this.setConfig(i);this.pageNumber=1}return n.prototype.generate=function(n){if(n=isNaN(n)?this.pageNumber:parseInt(n),n>this.totalPage)throw new Error("pageNumber is higher than the totalPage");var r=this.config.offset,i=[],t=0;if(n>1&&i.push(this.config.pre),n-2*r-1<=1)for(t=1;t<n;t++)i.push(t);else{for(t=1;t<=r;t++)i.push(t);for(i.push(this.config.omission),t=n-r;t<n;t++)i.push(t)}if(i.push(n),this.totalPage-n>2*r+1){for(t=n+1;t<=n+r;t++)i.push(t);for(i.push(this.config.omission),t=this.totalPage-r+1;t<=this.totalPage;t++)i.push(t)}else for(t=n+1;t<=this.totalPage;t++)i.push(t);return n<this.totalPage&&i.push(this.config.next),{pageNumber:n,pageSize:this.pageSize,totalRow:this.totalRow,totalPage:this.totalPage,pages:i,config:this.config}},n.prototype.setConfig=function(n,t){if(Object(n)===n)for(var i in n)this.config[i]=n[i];else n!=undefined&&t!=undefined&&(this.config[n+""]=t)},n.prototype.getConfig=function(n){return n!=undefined?this.config[n+""]:this.config},n.generate=function(t,i,r){var u=new n(0,10,r);return u.totalPage=t,u.setConfig(r),u.generate(i)},n})