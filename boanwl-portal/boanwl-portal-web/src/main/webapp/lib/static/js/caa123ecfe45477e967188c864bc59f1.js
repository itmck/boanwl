(function(){var n,i,ut,ft,k,h,et,d,g,ht,t,c,l,a,v,y,e,ot,o,p,w,st,u,b,r,nt,tt,it,rt,f,s,ct,lt;it=30;tt=30;rt=40;nt=35;$("#service-box .span").click(function(){var n;return n=$(this).find("a").attr("href"),location.href=n});$("#service-box .span").hover(function(){var t,n;return t=$(this).find(".bg"),n=$(this).find("img"),t.rotate({animateTo:90,duration:500}),n.rotate({animateTo:-45,duration:500}),n.animate({width:"+="+rt+"px",height:"+="+nt+"px",top:"+="+it+"px",left:"+="+tt+"px"},{queue:!0,duration:150})},function(){var t,n;return t=$(this).find(".bg"),n=$(this).find("img"),t.rotate({animateTo:0,duration:500}),n.rotate({animateTo:0,duration:500}),n.animate({width:"-="+rt+"px",height:"-="+nt+"px",top:"-="+it+"px",left:"-="+tt+"px"},{queue:!0,duration:150})});e=/((A|B|D|E|S|s)[0-9]{12})|(BXA[0-9]{10})|(K8[0-9]{11})|(02[0-9]{11})|(000[0-9]{10})|(C0000[0-9]{8})|((21|22|23|24|25|27|28|29|31|32|33|35|61|63|16|66)[0-9]{10})|((50|51)[0-9]{12})|7[0-9]{13}|6[0-9]{13}|8[0-9]{11}|(58|56)[0-9]{14}|6[0-9]{8}/igm;n=$("#code");ft=$("#hcode");i=$("#code-wrap");et=$("#query");t=et.find(".textarea");d=$("#billquery");h=t.find(".placeholder");r=10;p=function(){var n;return n=[],t.find(".code-item").each(function(){var t;return t=$(this).text(),n.push(t.substring(0,t.length-1)),n=n.slice(0,r)}),n};y=function(t){var i;return t=t||n.val(),i=t.length,i===0?i=1:i>=16&&(i=16),i*8+20};l=function(r){return r==null&&(r=""),y(r),t.find(".placeholder").hide(),i.show(),n.val(r).focus()};st=function(){return n.val(""),i.hide(),y()};f=function(){return st(),i.next(".code-item").length===1?t.append(i):void 0};u=function(n,t){return t==null&&(t=!1),n=encodeURIComponent(n),t?i.before('<span class="code-item error-code" onselectstart="return false;" style="-moz-user-select:none;">'+n+"<i>X<\/i><\/span>"):i.before('<span class="code-item" onselectstart="return false;" style="-moz-user-select:none;">'+n+"<i>X<\/i><\/span>"),v(),c(),a()};v=function(){return t.find(".error-code").length>0||t.find(".code-item").length===0?View.disableBtn(d):View.activeBtn(d)};c=function(){return t.find(".error-code").length>0?View.info("#alert","单号是9~16位的数字和字母哦"):View.info("#alert","")};a=function(){return t.find(".code-item").length>0||n.val()?(h.hide(),i.show()):(h.show(),i.hide())};h.on("click",function(){return l()});n.on("input propertychange",function(){return y(),v()});n.on("paste",function(){return setTimeout(function(){var c,s,a,i,o,h,v;if((s=$.trim(n.val()),!s)||(c=t.find("span"),i=c.length,i>=r))return!1;if(o=s.match(e),o!=null)for(o=_.uniq(o),h=0,v=o.length;h<v;h++){if(a=o[h],i>=r)break;u(a);i++}else u(s.slice(0,16),!0),i++;return i<r?l():f()},100)});n.on("keypress",function(t){var i,o;if(!($.inArray(t.which,[13,32,8])>=0))return i=n.val(),i.length>=16&&(o=i.match(e),o&&o.length>0?u(i):u(i,!0),n.val(""),p().length>=r)?f():void 0});n.on("keydown",function(o){var c,a,s,h,v,l,y;return o.which===13||o.which===32?(s=$.trim(n.val()),!s)?!1:(a=t.find(".code-item"),l=a.length,l>=r)?!1:(y=s.match(e),v=y!=null?!1:!0,u(s,v),n.val(""),l++,l>=r&&f(),!1):o.which===8&&(s=$.trim(n.val()),s.length===0)?(c=i.prev(".code-item"),c.length===1&&(h=c.text(),h=h.substring(0,h.length-1),c.remove(),n.val(h)),!1):void 0});n.on("blur",function(){var o,i,s,h,l;return i=n.val(),o=t.find(".code-item"),h=o.length,a(),!i||h>=r?f():(l=i.match(e),s=l!=null?!1:!0,u(i,s),f()),c()});n.on("click",function(n){return n.stopPropagation()});t.click(function(){var n;return n=t.find(".code-item").length,n<r?l():void 0});t.delegate("i","click",function(t){var i;return t.stopPropagation(),i=$(this).closest(".code-item"),i.remove(),c(),v(),a(),n.blur()});t.delegate(".code-item","click",function(t){var u,r;return t.stopPropagation(),u=$(this),r=u.text(),r=r.substring(0,r.length-1),u.after(i),u.remove(),i.show(),n.val(r).focus(),!1});b=$.cookie("lastQueryCode");b&&(k=$("#last-query"),k.text(b).parent().show(),k.click(function(i){var f,e;for(i.preventDefault(),f=t.find(".code-item"),e=f.length;e>=r;)f.eq(0).remove(),f=t.find(".code-item"),e=f.length;return u(b),n.blur()}));ut=$("#BillQueryForm");ct=!1;ut.submit(function(){var n;return(n=_.uniq(p()),t.find(".error-code").length>0||n.length===0)?(View.info("#alert","单号是9~16位的数字和字母哦"),!1):(ft.val(n.join(" ")),!0)});lt=25;ot=50;o=200;w=null;s="fold";g=$("#query-btn-wrap");ht=$("#query-input-wrap");$("#query").on("click",function(n){return n.stopPropagation(),s==="fold"?(t.animate({minHeight:"95px"},{duration:o}),g.animate({height:""+ot+"px"},{duration:o,complete:function(){return s="unfold"}})):void 0});$(document).on("click",function(){if(s==="unfold")return w&&clearTimeout(w),w=window.setTimeout(function(){if(p().length===0&&!n.val())return t.animate({minHeight:"25px"},{duration:o}),g.animate({height:"0px"},{duration:o,complete:function(){return s="fold"}})},300)});View.activeNavIndex=0;$("#player").click(function(){return flowplayer("player",""+urlConfig.web+"/Scripts/flowplayer/flowplayer-3.2.18.swf"),!1});$(".flexslider").flexslider({directionNav:!1,pauseOnAction:!1})}).call(this)